---
title: Setting Up a Self-Contained CI/CD Pipeline
description: This guide explains the philosophy behind self-contained CI/CD pipelines in 1FE.
sidebar:
  order: 2
---

import {
  FcEngineering,
  FcSettings,
  FcDeployment,
  FcWorkflow,
} from "react-icons/fc";

<div style={{ 
  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', 
  color: 'white', 
  padding: '2rem', 
  borderRadius: '12px', 
  marginBottom: '2rem',
  boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'
}}>

### <FcEngineering style={{ display: 'inline', marginRight: '0.5rem', verticalAlign: 'middle' }} /> CI/CD Pipeline Overview

**Audience:** Platform teams setting up production CI/CD infrastructure for their organization.

This guide explains the philosophy of self-contained CI/CD and our implementation approach. We show how to take local development work and reliably deploy it to production environments using GitHub Actions as an example.

**üìã Part of Infrastructure Setup:** See [Productionize Your 1FE Setup](/platform-guides/productionize/) for the complete production deployment checklist.

</div>

<div style={{ 
  background: '#f8f9fa', 
  padding: '1.5rem', 
  borderRadius: '8px', 
  border: '1px solid #e9ecef',
  marginBottom: '2rem'
}}>

### <FcSettings style={{ display: 'inline', marginRight: '0.5rem', verticalAlign: 'middle' }} /> What You'll Need

While this guide shows our specific implementation, you can adapt it to your needs. Here's what you'll typically need:

#### Essential Components & Our Implementation

‚Ä¢ **Version Control:** To track code changes and enable collaboration (we use GitHub)

‚Ä¢ **Build System:** Node.js for building and packaging (we use Node.js)

‚Ä¢ **Deployment Target:** CDN or cloud storage for hosting (we use Akamai CDN)

‚Ä¢ **Configuration Management:** Key-value stores for settings (we use Azure App Configuration)

‚Ä¢ **CI/CD Automation:** CI/CD platforms for automation (we use GitHub Actions)

</div>

<div style={{ 
  background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', 
  color: 'white', 
  padding: '1.5rem', 
  borderRadius: '8px', 
  marginBottom: '2rem'
}}>

## <FcDeployment style={{ display: 'inline', marginRight: '0.5rem', verticalAlign: 'middle' }} /> Setup Instructions

</div>

## Our Suggested Approach

:::tip[Quick Start with GitHub Actions]
If you're using **GitHub Actions** as your CI/CD platform, we recommend cloning or forking our complete CI/CD repository to get started quickly:

**üöÄ Clone or Fork:** [1fe-ci-cd Repository](https://github.com/docusign/1fe-ci-cd)

**What you get:**
- ‚úÖ **Pre-built workflows** - Complete CI/CD pipelines ready to use
- ‚úÖ **Reusable actions** - Modular components for building, testing, and deploying
- ‚úÖ **Template files** - Standard workflow templates for widget repositories
- ‚úÖ **Proven patterns** - Battle-tested deployment strategies and configurations

**Benefits:**
- üéØ **Faster setup** - Skip manual workflow creation and use proven templates
- üîÑ **Automatic updates** - Pull improvements and bug fixes from the central repository
- üõ°Ô∏è **Consistent practices** - Use the same patterns across all your widget projects
- üìö **Complete examples** - Real working implementations you can study and modify
:::

## 1. Repository Configuration

For a production setup, you need proper repository configuration to enable automated workflows. This involves setting up secrets, environments, and permissions for taking local development work to production.

### 1.1 Secrets Management

We use GitHub's secret management system to store sensitive credentials securely. All secrets are stored as repository secrets, never hardcoded in files.

**What it does:** Securely stores deployment credentials, API tokens, and connection strings that workflows need to authenticate with external services. This ensures sensitive information is never exposed in code or commit history.

:::note[Required Secrets for Our CI/CD Pipeline]
You need to configure these secrets in your repository to enable the CI/CD pipeline to deploy your widget:

‚Ä¢ **CDN Deployment Secret** (`AKAMAI_NS_SSH_PRIVATE_KEY`) - SSH private key for Akamai CDN deployment. This allows the pipeline to upload your built widget files to the content delivery network.

‚Ä¢ **Configuration Service Secret** (`AZURE_APP_CONFIG_CONNECTION_STRING`) - Azure App Configuration connection string. This enables the pipeline to update configuration metadata when your widget is deployed.

‚Ä¢ **Package Registry Secrets** - Authentication tokens for the internal NPM registry:
  - `NPM_TOKEN_READONLY_1FE` - For reading packages from the registry
  - `NPM_TOKEN` - For publishing your widget package to the internal package registry
:::

**Steps to configure:**

1. Navigate to your repository **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**

2. Click **"New repository secret"** for each required secret

3. Add the three secrets listed above with values provided by your platform team

4. Ensure repository permissions allow workflows to access secrets

:::tip
**Getting Secret Values**: Contact your platform team or refer to your organization's internal documentation for the current secret names and values. These are managed centrally and updated regularly.
:::

**Resources:**

‚Ä¢ [GitHub Secrets Documentation](https://docs.github.com/en/actions/security-guides/encrypted-secrets)

‚Ä¢ [GitHub Variables Documentation](https://docs.github.com/en/actions/learn-github-actions/variables)

### 1.2 Environment Configuration

Each widget repository needs environment configuration to control deployment rules and approvals. This ensures proper oversight and prevents unauthorized deployments to production.

:::note[Our Environment Setup]
We configure two environments for every widget repository:
- **Integration Environment** - For automated testing and validation of widget changes
- **Production Environment** - For live user-facing deployments with approval requirements
:::

**What it does:** Creates separate deployment environments with different approval rules. Integration environments allow automated deployments for testing, while production environments require manual approval to ensure oversight and control over production releases.

**Setting up approval groups:**

‚Ä¢ Create a GitHub team for production approvers (e.g., "Production Approvers")

‚Ä¢ Add the team as required reviewers in the production environment

‚Ä¢ Team members will receive notifications when production deployments need approval

‚Ä¢ Only team members can approve production releases

**Resources:**

‚Ä¢ [GitHub Environments Documentation](https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment)

‚Ä¢ [GitHub Teams Documentation](https://docs.github.com/en/organizations/organizing-members-into-teams/about-teams)

‚Ä¢ [Required Reviewers Documentation](https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment#required-reviewers)

### 1.3 Workflow Files in Widget Repositories

Our widget repositories contain the necessary CI/CD workflow files in the `.github/workflows/` directory:

:::tip[Widget Release Workflow]
**`widget-ci.yml`** - Main CI/CD pipeline for widget releases (calls [ci-widgets.yml](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/ci-widgets.yml))

‚Ä¢ Triggers on pushes to main branch and pull requests

‚Ä¢ Builds, tests, and deploys your widget to the appropriate environment

‚Ä¢ Handles the complete release process from code to production

**Example:** [CI/CD Release Workflow Run](https://github.com/docusign/1fe-widget-starter-kit/actions/runs/16467922994)
:::

:::caution[Widget Rollback Workflow]
**`rollback-widget.yml`** - Manual rollback workflow for reverting to previous widget versions (calls [reusable-rollback-ci.yml](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/reusable-rollback-ci.yml))

‚Ä¢ Can be triggered manually when needed

‚Ä¢ Allows you to quickly revert to a previous working version

‚Ä¢ Useful for emergency situations or when issues are discovered in production

**Example:** [Rollback Workflow Run](https://github.com/docusign/1fe-widget-starter-kit/actions/runs/15864169532)
:::

:::important[Platform Integration]
These workflow files are pre-configured to work with the 1fe platform and call into the centralized CI/CD repository (`1fe-ci-cd`) for the actual pipeline logic.
:::

### 1.4 Template Workflow Files (1fe-ci-cd Repository)

The centralized `1fe-ci-cd` repository contains pre-built workflow files that handle different aspects of the CI/CD pipeline:

| File Name                             | Purpose                                                                   | Link                                                                                    |
| ------------------------------------- | ------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| `ci-widgets.yml`                      | Main orchestrator workflow - coordinates all build, test, and deploy jobs | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/ci-widgets.yml) |
| `reusable-rollback-ci.yml`            | Handles rollback procedures with asset verification                       | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/reusable-rollback-ci.yml) |
| `reusable-update-azure-config.yml`    | Updates configuration in external services                                | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/reusable-update-azure-config.yml) |
| `reusable-widget-test-production.yml` | Production-specific test suite (lint, unit, contract, E2E)                | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/reusable-widget-test-production.yml) |
| `reusable-widget-test.yml`            | Standard test suite for development and integration environments          | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/workflows/reusable-widget-test.yml) |

### 1.5 Template Custom Actions (1fe-ci-cd Repository)

The centralized repository includes reusable actions for common CI/CD operations:

| Action Name            | Purpose                                                       | Link                                                                                    |
| ---------------------- | ------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| `check-cdn-asset`      | Verifies that assets are properly deployed and accessible     | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/actions/check-cdn-asset/action.yml) |
| `update-azure-config`  | Handles configuration updates in external services            | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/actions/update-azure-config/action.yml) |
| `widget-build`         | Builds the widget, calculates version, and archives artifacts | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/actions/widget-build/action.yml) |
| `widget-test-setup`    | Sets up the testing environment and dependencies              | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/actions/widget-test-setup/action.yml) |
| `widget-upload-akamai` | Handles uploading build artifacts to deployment targets       | [View source code](https://github.com/docusign/1fe-ci-cd/blob/main/.github/actions/widget-upload-akamai/action.yml) |

**Note:** Our example uses specific cloud services, but you can adapt this to your preferred deployment platform. We link to official documentation rather than implementation details that can go stale quickly.

## 3. How We Use the Workflows

Our workflow files are present in the widget repository and work as follows:

### 3.1 Automatic Releases

‚Ä¢ **`widget-ci.yml`** runs automatically when we:

  ‚Ä¢ Push code to the main branch

  ‚Ä¢ Create or update pull requests

  ‚Ä¢ No manual intervention needed for normal releases. Deployment to integration is automated.

**Example Implementation:** [1FE Starter App CI Workflow](https://github.com/docusign/1fe-starter-app/blob/main/.github/workflows/ci.yml)

### 3.2 Manual Rollbacks

‚Ä¢ **`rollback-widget.yml`** can be triggered manually when needed:

1. Go to the **Actions** tab in the GitHub repository

2. Select **"Rollback Widget"** from the workflow list

3. Click **"Run workflow"**

4. Enter the target version we want to rollback to

5. Select the environment (integration/production)

6. Click **"Run workflow"**

:::tip[When to Use Rollback]
We use the rollback workflow when:

‚Ä¢ A production deployment has issues

‚Ä¢ We need to quickly revert to a previous working version

‚Ä¢ Emergency situations require immediate action
:::

## Our Complete Toolchain

Here's our specific implementation stack with all the tools and services we use:

<details>
<summary><strong>Our Implementation</strong></summary>

<div style={{ marginLeft: '1rem', marginTop: '0.5rem' }}>

**Core Platform:**

‚Ä¢ **GitHub Actions** - CI/CD automation platform

‚Ä¢ **GitHub Secrets** - Secure credential management

‚Ä¢ **GitHub Environments** - Deployment environment management

**Deployment & CDN:**

‚Ä¢ **Akamai CDN** - Content delivery and hosting

**Configuration Management:**

‚Ä¢ **Azure App Configuration** - Version management and feature flags

**Development Tools:**

‚Ä¢ **Node.js** - Build and test environment

‚Ä¢ **Yarn** - Package management

‚Ä¢ **TypeScript** - Development language

</div>

</details>

## Alternative Implementations

Our example uses GitHub Actions and specific cloud services, but you can implement the same philosophy with different tools:

### CI/CD Platforms

‚Ä¢ **GitLab CI/CD:** [GitLab CI/CD Documentation](https://docs.gitlab.com/ee/ci/)

‚Ä¢ **Bitbucket Pipelines:** [Bitbucket Pipelines Documentation](https://support.atlassian.com/bitbucket-cloud/docs/get-started-with-bitbucket-pipelines/)

‚Ä¢ **Jenkins:** [Jenkins Documentation](https://www.jenkins.io/doc/)

### Deployment Platforms

‚Ä¢ **AWS S3 + CloudFront:** [AWS S3 Documentation](https://docs.aws.amazon.com/s3/), [CloudFront Documentation](https://docs.aws.amazon.com/cloudfront/)

‚Ä¢ **Google Cloud Storage + CDN:** [Google Cloud Storage Documentation](https://cloud.google.com/storage/docs)

‚Ä¢ **Azure Blob Storage + CDN:** [Azure Storage Documentation](https://docs.microsoft.com/en-us/azure/storage/)

‚Ä¢ **Vercel/Netlify:** [Vercel Documentation](https://vercel.com/docs), [Netlify Documentation](https://docs.netlify.com/)

### Configuration Management

‚Ä¢ **AWS Parameter Store:** [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html)

‚Ä¢ **HashiCorp Vault:** [Vault Documentation](https://www.vaultproject.io/docs)

‚Ä¢ **Google Secret Manager:** [Google Secret Manager Documentation](https://cloud.google.com/secret-manager/docs)

The goal is to have a CI/CD system that moves with your code, is transparent to your team, and can be easily understood and modified as your needs change.

## Summary

Our CI/CD setup provides a self-contained, automated deployment pipeline that moves with your code. Here's what we've covered:

### What We've Set Up

‚Ä¢ **Repository Configuration** - Secrets, environments, and workflow files
‚Ä¢ **Automated Workflows** - Release and rollback processes
‚Ä¢ **Centralized Templates** - Reusable CI/CD components
‚Ä¢ **Complete Toolchain** - GitHub Actions, Akamai CDN, Azure App Configuration

### Key Benefits

‚Ä¢ **Self-contained** - All pipeline logic stays with your code
‚Ä¢ **Automated** - No manual intervention for normal releases
‚Ä¢ **Secure** - Proper secret management and approval workflows
‚Ä¢ **Flexible** - Can be adapted to different tools and platforms
‚Ä¢ **Maintainable** - Clear documentation and modular design

### Next Steps

**Complete CI/CD Setup:**
- [ ] Configure your widget repository with the required secrets and environments
- [ ] Ensure your team has proper access and approval permissions
- [ ] Test the automated release process in integration environment
- [ ] Familiarize yourself with the rollback workflow for emergency situations

**Start Building:**
1. [Configure Widget Development Environment](/getting-started/local-development/)
2. [Deploy Your First Widget](/getting-started/deploy-poc/)
3. [Explore Platform Utilities](/development/Platform%20Utilities/Overview/)

This setup ensures your CI/CD pipeline is transparent, reliable, and can grow with your team's needs.